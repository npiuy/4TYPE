<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4タイプ診断</title>
    <link rel="prefetch" href="pageT.html">
    <link rel="prefetch" href="pageS.html">
    <link rel="prefetch" href="pageH.html">
    <link rel="prefetch" href="pageR.html">
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        h1,
        h4 {
            margin: 10px 10px;
        }

        form {
            text-align: left;
            width: 80%;
            max-width: 600px;
        }

        div {
            font-weight: bold;
        }

        .question {
            display: none;
            margin-bottom: 20px;
        }

        .question.active {
            display: block;
        }

        .option {
            padding: 15px;
            margin-bottom: 10px;
            border: 2px solid #d3d3d3;
            border-radius: 8px;
            cursor: pointer;
            user-select: none;
            background-color: #f9f9f9;
        }

        .option.selected {
            border-color: #007bff;
            background-color: #e6f3ff;
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        button {
            font-size: 18px;
            padding: 15px 30px;
            border-radius: 8px;
            border: none;
            background-color: #d3d3d3;
            color: black;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>4タイプ診断</h1>
    <h4>4つの解答の中から、ぴったりくるもの1つ選んでください。<br>決められない場合は、2つ選んでも構いません</h4>
    <!-- 合計点数の表示エリア -->
    <div id="scoreDisplay" style="margin-bottom: 20px; font-weight: bold; display: none;">
        <p>現在の点数:</p>
        <ul>
            <li>A: <span id="scoreA">0</span></li>
            <li>B: <span id="scoreB">0</span></li>
            <li>C: <span id="scoreC">0</span></li>
            <li>D: <span id="scoreD">0</span></li>
        </ul>
    </div>
    <form>
        <div class="question">
            <p>1. 子供のころのあなた。次のうち、特に楽しかったのはどれ？</p>
            <div class="option" data-option="A">席替えで好きな友達と座るとき、5人の友達が一度に誘ってくれた時</div>
            <div class="option" data-option="B">50メートル走のタイムが、クラスで一番だった時</div>
            <div class="option" data-option="D">自動車や女の子の絵が、我ながら上手く描けた時</div>
            <div class="option" data-option="C">よく知っている虫の幼虫や花のつぼみが、どんな形や色をしているかわかった時</div>
        </div>

        <div class="question">
            <p>2. 大変苦痛なこと、不快なことを選んでください。</p>
            <div class="option" data-option="A">パーティーであまり親しい人がいず、一人の時</div>
            <div class="option" data-option="B">大嫌いなヤツに頭を下げてお金を借りなければならない時</div>
            <div class="option" data-option="C">上司の指示ミスで、せっかくやった作業が無駄になった時</div>
            <div class="option" data-option="D">間違ったことを上司に強制された時</div>
        </div>

        <div class="question">
            <p>3. 次のうち、つい言ってしまう口癖や、つい考えてしまうパターンはどれでしょうか？</p>
            <div class="option" data-option="B">あの人に借りができた。これは貸しにしておく</div>
            <div class="option" data-option="C">本当のことだから、仕方がないよ</div>
            <div class="option" data-option="A">そんなに困っているなら、任せなさい</div>
            <div class="option" data-option="D">そのやり方は間違っている。正しいのはこれだよ</div>
        </div>

        <div class="question">
            <p>4. 気の置けない仲間たちと、お鍋でパーティー。こんな時、あなたはどのタイプ？</p>
            <div class="option" data-option="B">他人のことも考えず、好きなものばかりをたくさん食べているヤツがいると腹が立つ</div>
            <div class="option" data-option="A">みんなが鍋を楽しんでるか、気を配る。しかしつい、好きなものばかり食べてしまう</div>
            <div class="option" data-option="C">お店ごとの具の違いと値段の関係を比較したり、自分なりの評価を考える</div>
            <div class="option" data-option="D">気持ちが悪くて食べられないものがあると困る</div>
        </div>

        <div class="question">
            <p>5. あなたが中小企業の社長になったら、なりそうな社長はどのタイプ？</p>
            <div class="option" data-option="B">ハングリー精神の旺盛な社長。社員にもノルマを課したり、成功報酬を設定する</div>
            <div class="option" data-option="C">監督タイプの社長。社員の特性や能力に応じた人事配置を行う</div>
            <div class="option" data-option="D">自由を重んじる社長。社員管理をしない</div>
            <div class="option" data-option="A">派手好みの社長。TVのCMやイベントに力を入れる</div>
        </div>

        <div class="question">
            <p>6. カラオケに行った時の、選曲基準は？</p>
            <div class="option" data-option="A">みんなの注目を浴びる曲に挑戦</div>
            <div class="option" data-option="D">自分が好きで上手く歌いたい曲</div>
            <div class="option" data-option="C">自分の声質に合う曲や珍しい曲</div>
            <div class="option" data-option="B">他人より上手く歌える曲</div>
        </div>

        <div class="question">
            <p>7. あなたが他人に対して不満を感じるのはどんな時？</p>
            <div class="option" data-option="A">みんな、自分にばかり無理難題を押し付ける</div>
            <div class="option" data-option="C">自分の決めた通りに行動してくれない</div>
            <div class="option" data-option="D">自分の苦労をわかってくれない</div>
            <div class="option" data-option="B">自分ばかり損をしている</div>
        </div>

        <div class="question">
            <p>8. あなたがイヤだなぁ…と思うのは？</p>
            <div class="option" data-option="A">無視されること</div>
            <div class="option" data-option="B">負けること</div>
            <div class="option" data-option="C">わからないこと</div>
            <div class="option" data-option="D">ちゃんとできないこと</div>
        </div>

        <div class="question">
            <p>9. あなたが情けない奴、ダメな奴と感じるのはどのタイプ？</p>
            <div class="option" data-option="C">ステータスやブランドに振り回される</div>
            <div class="option" data-option="A">つまらないことに意固地になる</div>
            <div class="option" data-option="B">人目ばかり気にする</div>
            <div class="option" data-option="D">言い訳ばかりして逃げる</div>
        </div>

        <div class="button-container">
            <button id="backButton" type="button">戻る</button>
            <button id="nextButton" type="button">次へ</button>
        </div>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = document.querySelectorAll('.question');
            let currentIndex = 0;
            const scores = { A: 0, B: 0, C: 0, D: 0 };

            const nextButton = document.getElementById('nextButton');
            const backButton = document.getElementById('backButton');
            const scoreDisplay = {
                A: document.getElementById('scoreA'),
                B: document.getElementById('scoreB'),
                C: document.getElementById('scoreC'),
                D: document.getElementById('scoreD')
            };

            const updateButtons = () => {
                backButton.style.display = currentIndex > 0 ? 'block' : 'none';
                nextButton.textContent = currentIndex === questions.length - 1 ? '結果を見る' : '次へ';
            };

            const updateScoreDisplay = () => {
                scoreDisplay.A.textContent = scores.A.toFixed(1);
                scoreDisplay.B.textContent = scores.B.toFixed(1);
                scoreDisplay.C.textContent = scores.C.toFixed(1);
                scoreDisplay.D.textContent = scores.D.toFixed(1);
            };

            const recalculateScores = () => {
                scores.A = 0;
                scores.B = 0;
                scores.C = 0;
                scores.D = 0;

                questions.forEach(question => {
                    const selectedOptions = question.querySelectorAll('.option.selected');
                    selectedOptions.forEach(option => {
                        const optionValue = option.getAttribute('data-option');
                        scores[optionValue] += selectedOptions.length === 1 ? 1 : 0.5;
                    });
                });

                updateScoreDisplay();
            };

            const calculateResult = () => {
                const maxScore = Math.max(...Object.values(scores));
                const resultTypes = Object.keys(scores).filter(type => scores[type] === maxScore);

                if (resultTypes.length === 1) {
                    const result = resultTypes[0];
                    if (result === "A") {
                        window.location.href = "pageT.html";
                    } else if (result === "B") {
                        window.location.href = "pageS.html";
                    } else if (result === "C") {
                        window.location.href = "pageH.html";
                    } else if (result === "D") {
                        window.location.href = "pageR.html";
                    }
                } else {
                    window.location.href = "pageX.html";
                }
            };

            questions[currentIndex].classList.add('active');
            updateButtons();
            updateScoreDisplay();

            nextButton.addEventListener('click', () => {
                const currentQuestion = questions[currentIndex];
                const selectedOptions = currentQuestion.querySelectorAll('.option.selected');

                if (selectedOptions.length === 0 || selectedOptions.length > 2) {
                    alert('1つまたは2つ選択してください。');
                    return;
                }

                if (currentIndex < questions.length - 1) {
                    currentQuestion.classList.remove('active');
                    currentIndex++;
                    questions[currentIndex].classList.add('active');
                    updateButtons();
                } else {
                    nextButton.disabled = true;
                    nextButton.textContent = "計算中...";
                    calculateResult();
                }
            });

            backButton.addEventListener('click', () => {
                questions[currentIndex].classList.remove('active');
                currentIndex--;
                questions[currentIndex].classList.add('active');
                updateButtons();
            });

            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', () => {
                    const currentQuestion = questions[currentIndex];
                    const selectedOptions = currentQuestion.querySelectorAll('.option.selected');

                    if (selectedOptions.length >= 2 && !option.classList.contains('selected')) {
                        return;
                    }
                    option.classList.toggle('selected');
                    recalculateScores();
                });
            });
        });
    </script>

</body>

</html>
