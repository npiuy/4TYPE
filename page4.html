<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4タイプ診断</title>
    <script>
        function validateForm(event) {
            event.preventDefault(); // デフォルトのフォーム送信を防ぐ

            const questions = document.querySelectorAll('.question');
            let isValid = true;
            let scores = { A: 0, B: 0, C: 0, D: 0 };

            questions.forEach(question => {
                const checkedOptions = question.querySelectorAll('input[type="checkbox"]:checked');

                // 未回答チェック
                if (checkedOptions.length === 0) {
                    isValid = false;
                }

                // スコア計算
                if (checkedOptions.length === 1) {
                    const option = checkedOptions[0];
                    scores[option.dataset.option] += 1;
                } else if (checkedOptions.length === 2) {
                    checkedOptions.forEach(option => {
                        scores[option.dataset.option] += 0.5;
                    });
                }
            });

            if (!isValid) {
                alert("全ての質問に回答してください。");
                return;
            }

            // 同点チェック
            const maxScore = Math.max(scores.A, scores.B, scores.C, scores.D);
            const maxKeys = Object.keys(scores).filter(key => scores[key] === maxScore);

            if (maxKeys.length > 1) {
                window.location.href = "pageX.html"; // 同点の場合に pageX.html へ移動
                return;
            }

            // リダイレクト処理
            if (maxKeys[0] === "A") {
                window.location.href = "pageT.html";
            } else if (maxKeys[0] === "B") {
                window.location.href = "pageS.html";
            } else if (maxKeys[0] === "C") {
                window.location.href = "pageH.html";
            } else if (maxKeys[0] === "D") {
                window.location.href = "pageR.html";
            }
        }

        function showScores() {
            const questions = document.querySelectorAll('.question');
            let scores = { A: 0, B: 0, C: 0, D: 0 };

            questions.forEach(question => {
                const checkedOptions = question.querySelectorAll('input[type="checkbox"]:checked');

                if (checkedOptions.length === 1) {
                    // 1つ選択の場合：該当のスコアに1点加算
                    const option = checkedOptions[0];
                    scores[option.dataset.option] += 1;
                } else if (checkedOptions.length === 2) {
                    // 2つ選択の場合：それぞれに0.5点加算
                    checkedOptions.forEach(option => {
                        scores[option.dataset.option] += 0.5;
                    });
                }
            });

            // スコアを表示
        //    const scoreDisplay = document.getElementById('scoreDisplay');
        //    scoreDisplay.innerHTML = `
        //        A: ${scores.A.toFixed(1)} 点<br>
        //        B: ${scores.B.toFixed(1)} 点<br>
        //        C: ${scores.C.toFixed(1)} 点<br>
        //        D: ${scores.D.toFixed(1)} 点
        //    `;
        }

        function limitCheckboxSelection(question) {
            const checkboxes = question.querySelectorAll('input[type="checkbox"]');

            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const checkedOptions = question.querySelectorAll('input[type="checkbox"]:checked');

                    if (checkedOptions.length > 2) {
                        checkbox.checked = false; // 3つ目以降のチェックを解除
                    }
                });
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const questions = document.querySelectorAll('.question');
            questions.forEach(question => {
                limitCheckboxSelection(question);
            });
        });
    </script>
</head>
<body>
    <h1>4タイプ診断</h1>
    <h4>4つの解答の中から、ぴったりくるもの1つ選んでください。<br>決められない場合は、2つ選んでも構いません。</h4>
    <form onsubmit="validateForm(event);">
        <div class="question">
            <p>1.子供のころのあなた。次のうち、特に楽しかったのはどれ？</p>
            <input type="checkbox" id="q1_option1" data-option="A" data-points="1">
            <label for="q1_option1">席替えで好きな友達と座るとき、5人の友達が一度に誘ってくれた時</label><br>
            <input type="checkbox" id="q1_option2" data-option="B" data-points="1">
            <label for="q1_option2">50メートル走のタイムが、クラスで一番だった時</label><br>
            <input type="checkbox" id="q1_option3" data-option="D" data-points="1">
            <label for="q1_option3">自動車や女の子の絵が、我ながら上手く描けた時</label><br>
            <input type="checkbox" id="q1_option4" data-option="C" data-points="1">
            <label for="q1_option4">よく知っている虫の幼虫や花のつぼみが、どんな形や色をしているかわかった時</label><br>
        </div>
        
        <div class="question">
            <p>2.大変苦痛なこと、不快なことを選んでください。</p>
            <input type="checkbox" id="q2_option1" data-option="A" data-points="1">
            <label for="q2_option1">パーティーであまり親しい人がいず、お料理を食べる以外することもなく、一人の時</label><br>
            <input type="checkbox" id="q2_option2" data-option="B" data-points="1">
            <label for="q2_option2">大嫌いなヤツに、頭を下げてお金を借りなければならない時</label><br>
            <input type="checkbox" id="q2_option3" data-option="C" data-points="1">
            <label for="q2_option3">上司の指示ミスで、せっかくやった作業が全部無駄になり、やり直しになった時</label><br>
            <input type="checkbox" id="q2_option4" data-option="D" data-points="1">
            <label for="q2_option4">自分でも間違っている、と思うことを上司に強制された時</label><br>
        </div>
        
        <div class="question">
            <p>3.次のうち、つい言ってしまう口癖や、つい考えてしまうパターンはどれでしょうか？</p>
            <input type="checkbox" id="q3_option1" data-option="B" data-points="1">
            <label for="q3_option1">あの人に借りができた。これは貸しにしておく</label><br>
            <input type="checkbox" id="q3_option2" data-option="C" data-points="1">
            <label for="q3_option2">本当のことだから、仕方がないよ</label><br>
            <input type="checkbox" id="q3_option3" data-option="A" data-points="1">
            <label for="q3_option3">そんなに困っているなら、任せなさい</label><br>
            <input type="checkbox" id="q3_option4" data-option="D" data-points="1">
            <label for="q3_option4">そのやり方は間違っている。正しいのはこれだよ</label><br>
        </div>
        
        <div class="question">
            <p>4.気の置けない仲間たちと、お鍋でパーティー。わいわいがやがや、楽しくやっています。こんな時、あなたはどのタイプ？</p>
            <input type="checkbox" id="q4_option1" data-option="B" data-points="1">
            <label for="q4_option1">他人のことも考えず、好きなものばかりをたくさん食べているヤツがいると腹が立つ</label><br>
            <input type="checkbox" id="q4_option2" data-option="A" data-points="1">
            <label for="q4_option2">みんなが鍋を楽しんでるか、気を配る。しかしつい、好きなものばかり食べてしまう</label><br>
            <input type="checkbox" id="q4_option3" data-option="C" data-points="1">
            <label for="q4_option3">お店ごとの具の違いと値段の関係を比較したりして、自分なりのいい店、悪い店の評価を考える</label><br>
            <input type="checkbox" id="q4_option4" data-option="D" data-points="1">
            <label for="q4_option4">どうしても気持ちが悪くて食べられないものがあったり、店員さんの態度が許せなかったりする</label><br>
        </div>
        
        <div class="question">
            <p>5.あなたが中小企業の社長になったら、なりそうな社長はどのタイプ？</p>
            <input type="checkbox" id="q5_option1" data-option="B" data-points="1">
            <label for="q5_option1">ハングリー精神の旺盛な社長。社員にもノルマを課したり、成功報酬を設定したりで、がんばらせます</label><br>
            <input type="checkbox" id="q5_option2" data-option="C" data-points="1">
            <label for="q5_option2">監督タイプの社長。社員の仕事ぶりを把握し、各自の特性や能力にあった人事配置に気を配ります</label><br>
            <input type="checkbox" id="q5_option3" data-option="D" data-points="1">
            <label for="q5_option3">自由を重んじる社長。社員の管理をするくらいなら、会社を倒産させた方がマシだと考えています</label><br>
            <input type="checkbox" id="q5_option4" data-option="A" data-points="1">
            <label for="q5_option4">派手好みの社長。TVのCMやキャンペーンに力を入れ、社内のイベントにもお金を惜しみません</label><br>
        </div>
        
        <div class="question">
            <p>6.カラオケに行った時の、選曲基準を考えてみてください。あなたはどのタイプですか？</p>
            <input type="checkbox" id="q6_option1" data-option="A" data-points="1">
            <label for="q6_option1">面白い曲や意外な曲。とにかくみんなの注目を浴びる曲なら、多少ヘタでも挑戦</label><br>
            <input type="checkbox" id="q6_option2" data-option="D" data-points="1">
            <label for="q6_option2">自分の好きな曲。上手に歌えるかより、上手く歌いたい曲。そのかわり、練習も真剣にする</label><br>
            <input type="checkbox" id="q6_option3" data-option="C" data-points="1">
            <label for="q6_option3">歌いやすい曲、自分の声質に合う曲、珍しい曲、裏声で歌う曲など、いろんな曲に挑戦してみたくなる</label><br>
            <input type="checkbox" id="q6_option4" data-option="B" data-points="1">
            <label for="q6_option4">他人より上手く歌える曲。友達と行っても、カラオケの歌う順番や、曲数といったマナーにも気を使う</label><br>
        </div>
        
        <div class="question">
            <p>7.あなたが他人に対して不満を感じるのはどんな時？</p>
            <input type="checkbox" id="q7_option1" data-option="A" data-points="1">
            <label for="q7_option1">みんな、自分にばかり無理難題を押し付ける</label><br>
            <input type="checkbox" id="q7_option2" data-option="C" data-points="1">
            <label for="q7_option2">自分の決めた通りに、みんな行動してくれたらうまくいくのに</label><br>
            <input type="checkbox" id="q7_option3" data-option="D" data-points="1">
            <label for="q7_option3">自分はやっている苦労を、わかってくれない</label><br>
            <input type="checkbox" id="q7_option4" data-option="B" data-points="1">
            <label for="q7_option4">自分ばかりキチンとやっていて、損ばかりする</label><br>
        </div>
        
        <div class="question">
            <p>8.あなたがイヤだなぁ…と思ってしまうのは、どのイヤですか？</p>
            <input type="checkbox" id="q8_option1" data-option="A" data-points="1">
            <label for="q8_option1">無視されて、イヤ</label><br>
            <input type="checkbox" id="q8_option2" data-option="B" data-points="1">
            <label for="q8_option2">負けて、イヤ</label><br>
            <input type="checkbox" id="q8_option3" data-option="C" data-points="1">
            <label for="q8_option3">わからなくて、イヤ</label><br>
            <input type="checkbox" id="q8_option4" data-option="D" data-points="1">
            <label for="q8_option4">ちゃんとできなくて、イヤ</label><br>
        </div>
        
        <div class="question">
            <p>9.あなたが情けない奴、ダメな奴と感じるのはどのタイプ？</p>
            <input type="checkbox" id="q9_option1" data-option="C" data-points="1">
            <label for="q9_option1">ステータスやブランドにふりまわされて、自分の本当に好きなことがわからないバカ</label><br>
            <input type="checkbox" id="q9_option2" data-option="A" data-points="1">
            <label for="q9_option2">つまらないことに意固地になって、社会的成功を逃している負け犬</label><br>
            <input type="checkbox" id="q9_option3" data-option="B" data-points="1">
            <label for="q9_option3">人目ばかり気にして、内容の伴わない風船野郎</label><br>
            <input type="checkbox" id="q9_option4" data-option="D" data-points="1">
            <label for="q9_option4">言い訳や陰口ばかりで、本当のことから逃げてばかりいる臆病者</label><br>
        </div>
        <button type="submit">結果を見る</button>
    </form>

    <!-- 点数を表示するボタン -->
    <!-- <button type="button" onclick="showScores()">点数を表示する</button> -->

    <!-- 点数を表示するエリア -->
    <!-- <div id="scoreDisplay" style="margin-top: 20px; font-weight: bold;"></div> -->
</body>
</html>
